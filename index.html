<!doctype html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Style Single Page</title>
  <!-- Google Fonts: ë¡œê³ /ë³¸ë¬¸ í°íŠ¸ ë¡œë“œ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* ì „ì—­ í…Œë§ˆ ë³€ìˆ˜: ë¼ì´íŠ¸ ëª¨ë“œ ê¸°ë³¸ê°’ */
    :root {
      --bg: #f6f6f7;
      --surface: #ffffff;
      --text: #121212;
      --muted: #6a6a6a;
      --border: #dddddd;
      --accent-grad: linear-gradient(90deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
      --heart-red: #ed4956;
      --link-blue: #0095f6;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    /* ë‹¤í¬ ëª¨ë“œ ë³€ìˆ˜ ì˜¤ë²„ë¼ì´ë“œ */
    html[data-theme="dark"] {
      --bg: #0f1013;
      --surface: #17181d;
      --text: #f2f2f2;
      --muted: #a7a7a7;
      --border: #2c2f36;
      --shadow: 0 10px 26px rgba(0, 0, 0, 0.35);
    }

    /* ê³µí†µ ë¦¬ì…‹/ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      min-height: 100%;
      font-family: "Roboto", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    img {
      display: block;
      max-width: 100%;
    }

    a,
    button,
    input {
      font-family: inherit;
      color: inherit;
    }

    button {
      border: none;
      background: transparent;
      cursor: pointer;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button,
    a {
      transition: color 0.25s ease, background-color 0.25s ease, transform 0.25s ease, opacity 0.25s ease;
    }

    :focus-visible {
      outline: 2px solid #3b82f6;
      outline-offset: 2px;
      border-radius: 8px;
    }

    /* ìŠ¤í¬ë¦°ë¦¬ë” ì „ìš© í…ìŠ¤íŠ¸ */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* í—¤ë”: ìƒë‹¨ ê³ ì • + í•˜ë‹¨ ê·¸ë¼ë°ì´ì…˜ ë³´ë” */
    .app-header {
      position: sticky;
      top: 0;
      z-index: 120;
      background: var(--surface);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
    }

    .app-header::after {
      content: "";
      display: block;
      width: 100%;
      height: 1px;
      background: var(--accent-grad);
      opacity: 0.75;
    }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 12px;
      display: grid;
      grid-template-columns: auto minmax(120px, 1fr) auto;
      gap: 12px;
      align-items: center;
    }

    /* ë¡œê³  í…ìŠ¤íŠ¸ */
    .brand {
      font-family: "Pacifico", cursive;
      font-size: 1.55rem;
      line-height: 1;
      white-space: nowrap;
      margin: 0;
    }

    /* ê²€ìƒ‰ì°½ */
    .search-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
      background: color-mix(in srgb, var(--surface) 70%, var(--bg));
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 8px 12px;
      min-width: 0;
    }

    .search-wrap span {
      color: var(--muted);
      font-size: 0.95rem;
    }

    .search-wrap input {
      border: 0;
      outline: 0;
      width: 100%;
      background: transparent;
      color: var(--text);
      font-size: 0.95rem;
    }

    .search-wrap input::placeholder {
      color: var(--muted);
    }

    /* í—¤ë” ìš°ì¸¡ ì•„ì´ì½˜ ì˜ì—­ */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .icon-btn {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.05rem;
    }

    .icon-btn:hover {
      background: color-mix(in srgb, var(--surface) 60%, var(--bg));
      transform: translateY(-1px);
    }

    /* ë‹¤í¬ëª¨ë“œ í† ê¸€ UI */
    .theme-switch {
      position: relative;
      width: 44px;
      height: 24px;
      display: inline-flex;
      align-items: center;
      margin-left: 6px;
    }

    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
      position: absolute;
    }

    .theme-slider {
      width: 100%;
      height: 100%;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: color-mix(in srgb, var(--surface) 55%, var(--bg));
      position: relative;
      transition: background-color 0.25s ease;
    }

    .theme-slider::before {
      content: "";
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--text);
      transform: translateX(0);
      transition: transform 0.25s ease;
    }

    .theme-switch input:checked + .theme-slider::before {
      transform: translateX(20px);
    }

    /* ë©”ì¸ ë ˆì´ì•„ì›ƒ: í”¼ë“œ + ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” */
    .page-main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 12px 80px;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 22px;
    }

    .feed-column {
      width: 100%;
      margin: 0 auto;
      max-width: 640px;
    }

    /* ìŠ¤í† ë¦¬ ì„¹ì…˜ */
    .stories {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 10px;
      margin-bottom: 14px;
      box-shadow: var(--shadow);
    }

    .stories-list {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding-bottom: 2px;
      scrollbar-width: thin;
      scrollbar-color: var(--muted) transparent;
    }

    .stories-list::-webkit-scrollbar {
      height: 6px;
    }

    .stories-list::-webkit-scrollbar-thumb {
      background: color-mix(in srgb, var(--muted) 50%, transparent);
      border-radius: 999px;
    }

    .story-item {
      min-width: 72px;
      max-width: 72px;
      text-align: center;
      color: var(--text);
    }

    .story-button {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      border-radius: 10px;
      padding: 4px 2px;
    }

    .story-button:hover .story-ring {
      animation: ring-spin 0.95s linear infinite;
    }

    .story-ring {
      width: 66px;
      height: 66px;
      border-radius: 50%;
      padding: 2px;
      background: var(--accent-grad);
      position: relative;
    }

    .story-ring img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--surface);
      background: var(--surface);
    }

    .story-plus {
      position: absolute;
      right: -2px;
      bottom: -2px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--link-blue);
      color: #fff;
      border: 2px solid var(--surface);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
    }

    .story-name {
      width: 100%;
      font-size: 0.76rem;
      color: var(--text);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }

    /* í”¼ë“œ ê²Œì‹œë¬¼ ì¹´ë“œ */
    .feed-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .post-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateY(22px);
      transition: opacity 0.55s ease, transform 0.55s ease;
    }

    .post-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .post-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      gap: 8px;
    }

    .post-user {
      display: inline-flex;
      align-items: center;
      gap: 9px;
      min-width: 0;
    }

    .post-user img {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid var(--border);
      flex-shrink: 0;
    }

    .post-username {
      font-weight: 700;
      font-size: 0.92rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 170px;
    }

    .post-more {
      font-size: 1.3rem;
      color: var(--muted);
      line-height: 1;
      padding: 4px;
      border-radius: 8px;
    }

    .post-more:hover {
      color: var(--text);
      background: color-mix(in srgb, var(--surface) 60%, var(--bg));
    }

    /* ì´ë¯¸ì§€ + ìŠ¤ì¼ˆë ˆí†¤ + ë”ë¸”í´ë¦­ í•˜íŠ¸ */
    .image-frame {
      position: relative;
      width: 100%;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      background: #d8d8d8;
      isolation: isolate;
    }

    .image-frame::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(100deg, #d0d0d0 20%, #ececec 45%, #d0d0d0 70%);
      background-size: 220% 100%;
      animation: skeleton-shimmer 1.4s linear infinite;
      z-index: 1;
    }

    .image-frame.loaded::before {
      display: none;
    }

    .image-frame img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .image-frame.loaded img {
      opacity: 1;
    }

    .double-heart {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.5);
      font-size: 6rem;
      color: #fff;
      opacity: 0;
      pointer-events: none;
      text-shadow: 0 3px 18px rgba(0, 0, 0, 0.35);
      z-index: 2;
    }

    .image-frame.show-heart .double-heart {
      animation: heart-pop-fade 0.8s ease forwards;
    }

    /* ì•¡ì…˜/ë©”íƒ€ ì˜ì—­ */
    .post-body {
      padding: 8px 12px 10px;
    }

    .post-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .left-actions {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .action-btn {
      font-size: 1.25rem;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
    }

    .action-btn:hover {
      background: color-mix(in srgb, var(--surface) 60%, var(--bg));
      transform: translateY(-1px);
    }

    .action-btn.active.like-btn {
      color: var(--heart-red);
    }

    .action-btn.active.bookmark-btn {
      color: #f4b400;
    }

    .bounce {
      animation: bounce-scale 0.35s ease;
    }

    .likes {
      margin: 0 0 8px;
      font-size: 0.9rem;
      font-weight: 700;
    }

    .likes.animate {
      animation: likes-pulse 0.35s ease;
    }

    .caption,
    .preview-comments {
      margin: 0 0 6px;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .caption strong {
      margin-right: 5px;
    }

    .more-link {
      color: var(--muted);
      margin-left: 6px;
    }

    .more-link:hover {
      color: var(--text);
      text-decoration: underline;
    }

    .preview-comments {
      padding: 0;
    }

    .comment-item {
      list-style: none;
      margin: 0 0 4px;
      padding: 0;
      color: var(--text);
    }

    .comment-item strong {
      margin-right: 5px;
      font-weight: 700;
    }

    .post-time {
      margin: 8px 0 10px;
      color: var(--muted);
      font-size: 0.73rem;
      letter-spacing: 0.02em;
    }

    /* ëŒ“ê¸€ ì…ë ¥í–‰ */
    .comment-form {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 8px;
      border-top: 1px solid var(--border);
      padding-top: 10px;
    }

    .comment-emoji {
      font-size: 1rem;
    }

    .comment-input {
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 0.9rem;
      min-width: 0;
    }

    .comment-input::placeholder {
      color: var(--muted);
    }

    .comment-submit {
      color: var(--link-blue);
      font-weight: 700;
      opacity: 0.6;
    }

    .comment-submit:hover {
      opacity: 1;
    }

    /* ë¬´í•œ ìŠ¤í¬ë¡¤ ì„¼í‹°ë„ */
    #feed-sentinel {
      width: 100%;
      height: 12px;
    }

    /* ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” */
    .sidebar {
      display: none;
    }

    .sidebar-inner {
      position: sticky;
      top: 86px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow);
    }

    .profile-main,
    .suggest-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .profile-main {
      margin-bottom: 16px;
    }

    .profile-left,
    .suggest-left {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .profile-main img,
    .suggest-item img {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid var(--border);
      flex-shrink: 0;
    }

    .profile-meta,
    .suggest-meta {
      min-width: 0;
    }

    .profile-id,
    .suggest-id {
      display: block;
      font-weight: 700;
      font-size: 0.9rem;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    }

    .profile-name,
    .suggest-note {
      color: var(--muted);
      font-size: 0.82rem;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    }

    .link-btn {
      color: var(--link-blue);
      font-size: 0.83rem;
      font-weight: 700;
      white-space: nowrap;
    }

    .link-btn:hover {
      text-decoration: underline;
    }

    .suggest-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--muted);
      font-size: 0.85rem;
      margin-bottom: 10px;
    }

    .suggest-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    .sidebar-foot {
      font-size: 0.75rem;
      line-height: 1.5;
      color: var(--muted);
    }

    .sidebar-foot a {
      color: inherit;
    }

    .sidebar-foot a:hover {
      color: var(--text);
      text-decoration: underline;
    }

    /* ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
    .mobile-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 130;
      background: var(--surface);
      border-top: 1px solid var(--border);
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      padding: 6px 2px max(6px, env(safe-area-inset-bottom));
    }

    .mobile-nav button {
      height: 40px;
      border-radius: 10px;
      font-size: 1.25rem;
      color: var(--muted);
    }

    .mobile-nav button:hover {
      background: color-mix(in srgb, var(--surface) 60%, var(--bg));
      color: var(--text);
    }

    .mobile-nav button.active {
      color: var(--text);
      background: color-mix(in srgb, var(--surface) 40%, var(--bg));
      position: relative;
    }

    .mobile-nav button.active::before {
      content: "";
      position: absolute;
      top: -7px;
      left: 25%;
      width: 50%;
      height: 3px;
      border-radius: 999px;
      background: var(--accent-grad);
    }

    /* ìŠ¤í† ë¦¬ ëª¨ë‹¬ */
    .story-modal {
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(0, 0, 0, 0.88);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity 0.25s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }

    .story-modal.open {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .story-modal-dialog {
      width: min(420px, 92vw);
      height: min(760px, 90vh);
      border-radius: 18px;
      background: #111;
      color: #fff;
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    .story-progress {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      height: 4px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.25);
      overflow: hidden;
      z-index: 3;
    }

    .story-progress > span {
      display: block;
      width: 0%;
      height: 100%;
      background: #fff;
    }

    .story-progress > span.running {
      animation: story-progress 5s linear forwards;
    }

    .story-head {
      margin-top: 20px;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 2;
    }

    .story-head-left {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .story-head img {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid rgba(255, 255, 255, 0.65);
    }

    .story-close {
      color: #fff;
      font-size: 1.2rem;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .story-close:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .story-content {
      margin-top: 8px;
      flex: 1;
      display: grid;
      place-items: center;
      position: relative;
      overflow: hidden;
      background: #000;
    }

    .story-content img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .story-caption {
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      font-size: 0.95rem;
      line-height: 1.4;
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 8px 10px;
      backdrop-filter: blur(2px);
    }

    /* ë°˜ì‘í˜•: ëª¨ë°”ì¼(ê¸°ë³¸) */
    @media (max-width: 480px) {
      .header-inner {
        grid-template-columns: auto minmax(90px, 1fr) auto;
        gap: 8px;
        padding: 8px 8px;
      }

      .brand {
        font-size: 1.34rem;
      }

      .search-wrap {
        padding: 7px 10px;
      }

      .icon-btn {
        width: 30px;
        height: 30px;
      }

      .story-item {
        min-width: 68px;
        max-width: 68px;
      }

      .story-ring {
        width: 62px;
        height: 62px;
      }
    }

    /* ë°˜ì‘í˜•: íƒœë¸”ë¦¿(481~768) */
    @media (min-width: 481px) and (max-width: 768px) {
      .page-main {
        padding-left: 14px;
        padding-right: 14px;
      }
    }

    /* ë°˜ì‘í˜•: 769~1023 êµ¬ê°„ */
    @media (min-width: 769px) and (max-width: 1023px) {
      .mobile-nav {
        display: none;
      }

      .page-main {
        padding-bottom: 16px;
      }
    }

    /* ë°˜ì‘í˜•: ë°ìŠ¤í¬í†±(1024+) */
    @media (min-width: 1024px) {
      .mobile-nav {
        display: none;
      }

      .page-main {
        grid-template-columns: minmax(0, 640px) 300px;
        justify-content: center;
        align-items: start;
        padding-bottom: 24px;
      }

      .sidebar {
        display: block;
      }
    }

    /* ê³µí†µ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
    @keyframes ring-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes bounce-scale {
      0% { transform: scale(1); }
      45% { transform: scale(1.28); }
      100% { transform: scale(1); }
    }

    @keyframes likes-pulse {
      0% {
        transform: scale(1);
        opacity: 0.85;
      }
      50% {
        transform: scale(1.06);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes heart-pop-fade {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.4);
      }
      25% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1.3);
      }
    }

    @keyframes skeleton-shimmer {
      0% {
        background-position: 180% 0;
      }
      100% {
        background-position: -40% 0;
      }
    }

    @keyframes story-progress {
      from {
        width: 0%;
      }
      to {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨ ê³ ì • í—¤ë” -->
  <header class="app-header">
    <div class="header-inner">
      <h1 class="brand" aria-label="Instagram ìŠ¤íƒ€ì¼ ë¡œê³ ">InstaMoment</h1>

      <label class="search-wrap" for="global-search" aria-label="ê²€ìƒ‰">
        <span aria-hidden="true">ğŸ”</span>
        <input id="global-search" type="search" placeholder="ê²€ìƒ‰">
      </label>

      <div class="header-actions" aria-label="í—¤ë” ë¹ ë¥¸ ë©”ë‰´">
        <button class="icon-btn" type="button" aria-label="í™ˆ">âŒ‚</button>
        <button class="icon-btn" type="button" aria-label="ì•Œë¦¼">â™¡</button>
        <button class="icon-btn" type="button" aria-label="í”„ë¡œí•„">ğŸ‘¤</button>

        <label class="theme-switch" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜">
          <input id="theme-toggle" type="checkbox" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜">
          <span class="theme-slider" aria-hidden="true"></span>
        </label>
      </div>
    </div>
  </header>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <main class="page-main">
    <!-- ì¤‘ì•™ í”¼ë“œ ì»¬ëŸ¼ -->
    <div class="feed-column">
      <!-- ìŠ¤í† ë¦¬ ì„¹ì…˜ -->
      <section class="stories" aria-label="ìŠ¤í† ë¦¬ ëª©ë¡">
        <div id="stories-list" class="stories-list"></div>
      </section>

      <!-- ê²Œì‹œë¬¼ í”¼ë“œ ì„¹ì…˜ -->
      <section aria-label="ê²Œì‹œë¬¼ í”¼ë“œ">
        <div id="feed-list" class="feed-list"></div>
        <div id="feed-sentinel" aria-hidden="true"></div>
      </section>
    </div>

    <!-- ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” -->
    <aside class="sidebar" aria-label="ì¶”ì²œ ë° ê³„ì • ì •ë³´">
      <div class="sidebar-inner">
        <section class="profile-main" aria-label="í˜„ì¬ ì‚¬ìš©ì">
          <div class="profile-left">
            <img src="https://picsum.photos/seed/me/88/88" alt="í˜„ì¬ ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„">
            <div class="profile-meta">
              <span class="profile-id">my_daily_log</span>
              <span class="profile-name">ì˜¤ëŠ˜ì˜ ê¸°ë¡</span>
            </div>
          </div>
          <button class="link-btn" type="button" aria-label="ê³„ì • ì „í™˜">ì „í™˜</button>
        </section>

        <section aria-label="íšŒì›ë‹˜ì„ ìœ„í•œ ì¶”ì²œ">
          <div class="suggest-title">
            <strong>íšŒì›ë‹˜ì„ ìœ„í•œ ì¶”ì²œ</strong>
            <button class="link-btn" type="button" aria-label="ì¶”ì²œ ëª¨ë‘ ë³´ê¸°">ëª¨ë‘ ë³´ê¸°</button>
          </div>
          <div id="suggest-list" class="suggest-list"></div>
        </section>

        <footer class="sidebar-foot" aria-label="ì‚¬ì´ë“œ í‘¸í„° ë§í¬">
          <a href="#" aria-label="ì†Œê°œ">ì†Œê°œ</a> Â·
          <a href="#" aria-label="ë„ì›€ë§">ë„ì›€ë§</a> Â·
          <a href="#" aria-label="í™ë³´ ì„¼í„°">í™ë³´ ì„¼í„°</a> Â·
          <a href="#" aria-label="API">API</a> Â·
          <a href="#" aria-label="ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> Â·
          <a href="#" aria-label="ì•½ê´€">ì•½ê´€</a> Â·
          <a href="#" aria-label="ìœ„ì¹˜">ìœ„ì¹˜</a> Â·
          <a href="#" aria-label="ì–¸ì–´">ì–¸ì–´</a>
          <div style="margin-top: 8px;">Â© 2026 INSTA MOMENT</div>
        </footer>
      </div>
    </aside>
  </main>

  <!-- ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="mobile-nav" aria-label="ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜">
    <button class="active" type="button" aria-label="í™ˆ">âŒ‚</button>
    <button type="button" aria-label="ê²€ìƒ‰">ğŸ”</button>
    <button type="button" aria-label="ë¦´ìŠ¤">â–¶</button>
    <button type="button" aria-label="ì‡¼í•‘">ğŸ›</button>
    <button type="button" aria-label="í”„ë¡œí•„">ğŸ‘¤</button>
  </nav>

  <!-- ìŠ¤í† ë¦¬ ëª¨ë‹¬ -->
  <div id="story-modal" class="story-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-label="ìŠ¤í† ë¦¬ ë³´ê¸°">
    <div class="story-modal-dialog">
      <div class="story-progress"><span id="story-progress-bar"></span></div>
      <div class="story-head">
        <div class="story-head-left">
          <img id="story-modal-avatar" src="" alt="ìŠ¤í† ë¦¬ ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„">
          <strong id="story-modal-name">username</strong>
        </div>
        <button id="story-close-btn" class="story-close" type="button" aria-label="ìŠ¤í† ë¦¬ ë‹«ê¸°">âœ•</button>
      </div>
      <div class="story-content">
        <img id="story-modal-image" src="" alt="ìŠ¤í† ë¦¬ ì´ë¯¸ì§€">
        <p id="story-modal-caption" class="story-caption"></p>
      </div>
    </div>
  </div>

  <script>
    "use strict";

    // ì „ì—­ ë°ì´í„°: ìŠ¤í† ë¦¬ ë”ë¯¸ ë°ì´í„°
    const storiesData = [
      { id: 1, username: "ë‚´ ìŠ¤í† ë¦¬", avatar: "https://picsum.photos/seed/my-story/120/120", isMine: true },
      { id: 2, username: "min_ji", avatar: "https://picsum.photos/seed/story-minji/120/120", isMine: false },
      { id: 3, username: "seoul.walk", avatar: "https://picsum.photos/seed/story-seoulwalk/120/120", isMine: false },
      { id: 4, username: "art.jiho", avatar: "https://picsum.photos/seed/story-artjiho/120/120", isMine: false },
      { id: 5, username: "travel_haru", avatar: "https://picsum.photos/seed/story-travelharu/120/120", isMine: false },
      { id: 6, username: "coffee_note", avatar: "https://picsum.photos/seed/story-coffee/120/120", isMine: false },
      { id: 7, username: "daylight.lee", avatar: "https://picsum.photos/seed/story-daylight/120/120", isMine: false },
      { id: 8, username: "woori.fit", avatar: "https://picsum.photos/seed/story-fit/120/120", isMine: false },
      { id: 9, username: "photo_by_n", avatar: "https://picsum.photos/seed/story-photo/120/120", isMine: false }
    ];

    // ì „ì—­ ë°ì´í„°: ì´ˆê¸° ê²Œì‹œë¬¼ 5ê°œ
    const postsData = [
      {
        id: 1,
        username: "min_ji",
        avatar: "https://picsum.photos/seed/avatar-minji/80/80",
        image: "https://picsum.photos/seed/post-1/800/800",
        likes: 132,
        caption: "ì£¼ë§ ë¸ŒëŸ°ì¹˜ ì„±ê³µ. ì˜¤ëŠ˜ì˜ ë² ìŠ¤íŠ¸ ë©”ë‰´ëŠ” ë²„í„°í† ìŠ¤íŠ¸!",
        comments: [
          { username: "sooyeon", text: "ì‚¬ì§„ ìƒ‰ê° ë„ˆë¬´ ì¢‹ì•„ìš” ğŸ™Œ" },
          { username: "daily.hoon", text: "ì—¬ê¸° ì–´ë”˜ì§€ ê¶ê¸ˆí•´ìš”!" }
        ],
        hoursAgo: 2,
        liked: false,
        bookmarked: false
      },
      {
        id: 2,
        username: "seoul.walk",
        avatar: "https://picsum.photos/seed/avatar-seoulwalk/80/80",
        image: "https://picsum.photos/seed/post-2/800/800",
        likes: 421,
        caption: "ë…¸ì„ íƒ€ì„ì— í•œê°• ì‚°ì±…. ë°”ëŒì´ ì‹œì›í•´ì„œ ì™„ë²½í–ˆì–´ìš”.",
        comments: [
          { username: "min_ji", text: "í•˜ëŠ˜ ìƒ‰ì´ ì§„ì§œ ì˜í™” ê°™ì•„ìš”!" }
        ],
        hoursAgo: 4,
        liked: true,
        bookmarked: true
      },
      {
        id: 3,
        username: "art.jiho",
        avatar: "https://picsum.photos/seed/avatar-artjiho/80/80",
        image: "https://picsum.photos/seed/post-3/800/800",
        likes: 89,
        caption: "ìƒˆ ì‘ì—… ì‹œì‘. ëŸ¬í”„ ìŠ¤ì¼€ì¹˜ ë‹¨ê³„ë¶€í„° ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤.",
        comments: [
          { username: "gallery.na", text: "ì™„ì„±ì‘ë„ ê¸°ë‹¤ë¦´ê²Œìš”!" },
          { username: "woori.fit", text: "ì„ ì´ ì •ë§ ê¹”ë”í•´ìš”." }
        ],
        hoursAgo: 7,
        liked: false,
        bookmarked: false
      },
      {
        id: 4,
        username: "travel_haru",
        avatar: "https://picsum.photos/seed/avatar-travelharu/80/80",
        image: "https://picsum.photos/seed/post-4/800/800",
        likes: 708,
        caption: "ë°”ë‹¤ ì• ì‘ì€ ìˆ™ì†Œ. ì°½ë¬¸ ì—´ë©´ íŒŒë„ ì†Œë¦¬ë§Œ ë“¤ë ¤ìš”.",
        comments: [
          { username: "sunny.day", text: "ì €ë„ ê¼­ ê°€ë³´ê³  ì‹¶ì–´ìš” ğŸŒŠ" }
        ],
        hoursAgo: 12,
        liked: false,
        bookmarked: true
      },
      {
        id: 5,
        username: "coffee_note",
        avatar: "https://picsum.photos/seed/avatar-coffee/80/80",
        image: "https://picsum.photos/seed/post-5/800/800",
        likes: 214,
        caption: "ì˜¤ëŠ˜ì˜ ì›ë‘ëŠ” ì‚°ë¯¸ê°€ ì•„ì£¼ ì„ ëª…í•œ íƒ€ì….",
        comments: [
          { username: "bean.lab", text: "ì¶”ì¶œ ë¹„ìœ¨ ê³µìœ  ê°€ëŠ¥í• ê¹Œìš”?" },
          { username: "daily.hoon", text: "ì»µë„ ë„ˆë¬´ ì˜ˆë»ìš”." }
        ],
        hoursAgo: 18,
        liked: true,
        bookmarked: false
      }
    ];

    // ì „ì—­ ë°ì´í„°: ì‚¬ì´ë“œ ì¶”ì²œ ìœ ì €
    const suggestUsers = [
      { username: "forest.wave", name: "ì´ˆë¡ ì‚°ì±…", avatar: "https://picsum.photos/seed/suggest-1/88/88" },
      { username: "studio_rae", name: "ë ˆì´ ìŠ¤íŠœë””ì˜¤", avatar: "https://picsum.photos/seed/suggest-2/88/88" },
      { username: "fit.kyeong", name: "ê²½ì´ë¡œìš´ ë£¨í‹´", avatar: "https://picsum.photos/seed/suggest-3/88/88" },
      { username: "book.and.day", name: "ì½ê³  ì“°ëŠ” í•˜ë£¨", avatar: "https://picsum.photos/seed/suggest-4/88/88" },
      { username: "urban.snap", name: "ë„ì‹œ ìŠ¤ëƒ…", avatar: "https://picsum.photos/seed/suggest-5/88/88" }
    ];

    // DOM ì°¸ì¡°/ìƒíƒœ ë³€ìˆ˜
    const storiesListEl = document.getElementById("stories-list");
    const feedListEl = document.getElementById("feed-list");
    const feedSentinelEl = document.getElementById("feed-sentinel");
    const suggestListEl = document.getElementById("suggest-list");
    const themeToggleEl = document.getElementById("theme-toggle");
    const storyModalEl = document.getElementById("story-modal");
    const storyProgressEl = document.getElementById("story-progress-bar");
    const storyModalAvatarEl = document.getElementById("story-modal-avatar");
    const storyModalNameEl = document.getElementById("story-modal-name");
    const storyModalImageEl = document.getElementById("story-modal-image");
    const storyModalCaptionEl = document.getElementById("story-modal-caption");
    const storyCloseBtnEl = document.getElementById("story-close-btn");
    let storyTimer = null;
    let postIdSeed = postsData.length + 1;
    let infiniteLoading = false;
    let lastFocusElement = null;

    // í”¼ë“œ ì¹´ë“œ í˜ì´ë“œì¸ ê´€ì°°ì
    const postRevealObserver = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.15 }
    );

    // ìŠ¤í† ë¦¬ ëª©ë¡ ë Œë”ë§
    function renderStories(data) {
      const fragment = document.createDocumentFragment();

      data.forEach((story) => {
        const wrapper = document.createElement("div");
        wrapper.className = "story-item";

        const button = document.createElement("button");
        button.type = "button";
        button.className = "story-button";
        button.setAttribute("aria-label", story.isMine ? "ë‚´ ìŠ¤í† ë¦¬ ë³´ê¸°" : `${story.username} ìŠ¤í† ë¦¬ ë³´ê¸°`);

        button.innerHTML = `
          <span class="story-ring ${story.isMine ? "mine" : ""}">
            <img src="${story.avatar}" alt="${story.username} í”„ë¡œí•„ ì‚¬ì§„">
            ${story.isMine ? '<span class="story-plus" aria-hidden="true">+</span>' : ""}
          </span>
          <span class="story-name">${story.username}</span>
        `;

        button.addEventListener("click", () => openStoryModal(story));
        wrapper.appendChild(button);
        fragment.appendChild(wrapper);
      });

      storiesListEl.innerHTML = "";
      storiesListEl.appendChild(fragment);
    }

    // ê²Œì‹œë¬¼ ëª©ë¡ ë Œë”ë§
    function renderPosts(data, append = false) {
      const fragment = document.createDocumentFragment();

      data.forEach((post) => {
        const postEl = createPostElement(post);
        fragment.appendChild(postEl);
      });

      if (!append) {
        feedListEl.innerHTML = "";
      }

      feedListEl.appendChild(fragment);
    }

    // ê²Œì‹œë¬¼ ì¹´ë“œ DOM ìƒì„±
    function createPostElement(post) {
      const article = document.createElement("article");
      article.className = "post-card";
      article.setAttribute("data-post-id", String(post.id));
      article.dataset.likes = String(post.likes);

      const initialComments = post.comments.slice(0, 2)
        .map((comment) => `<li class="comment-item"><strong>${comment.username}</strong>${comment.text}</li>`)
        .join("");

      article.innerHTML = `
        <header class="post-top">
          <div class="post-user">
            <img src="${post.avatar}" alt="${post.username} í”„ë¡œí•„ ì‚¬ì§„">
            <span class="post-username">${post.username}</span>
          </div>
          <button class="post-more" type="button" aria-label="ë”ë³´ê¸°">â‹¯</button>
        </header>

        <div class="image-frame" data-role="image-frame">
          <img src="${post.image}" alt="${post.username}ì˜ ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
          <span class="double-heart" aria-hidden="true">â¤ï¸</span>
        </div>

        <div class="post-body">
          <div class="post-actions">
            <div class="left-actions">
              <button
                class="action-btn like-btn ${post.liked ? "active" : ""}"
                data-action="like"
                type="button"
                aria-label="ì¢‹ì•„ìš”"
                aria-pressed="${post.liked ? "true" : "false"}"
              >${post.liked ? "â¤ï¸" : "â™¡"}</button>
              <button class="action-btn" type="button" aria-label="ëŒ“ê¸€">ğŸ’¬</button>
              <button class="action-btn" type="button" aria-label="ê³µìœ ">â†—</button>
            </div>
            <button
              class="action-btn bookmark-btn ${post.bookmarked ? "active" : ""}"
              data-action="bookmark"
              type="button"
              aria-label="ë¶ë§ˆí¬"
              aria-pressed="${post.bookmarked ? "true" : "false"}"
            >${post.bookmarked ? "ğŸ“‘" : "ğŸ”–"}</button>
          </div>

          <p class="likes">ì¢‹ì•„ìš” ${Number(post.likes).toLocaleString("ko-KR")}ê°œ</p>
          <p class="caption"><strong>${post.username}</strong>${post.caption}<a class="more-link" href="#" aria-label="ìº¡ì…˜ ë” ë³´ê¸°">ë” ë³´ê¸°</a></p>
          <ul class="preview-comments" data-role="comment-list">${initialComments}</ul>
          <p class="post-time">${post.hoursAgo}ì‹œê°„ ì „</p>

          <form class="comment-form" novalidate>
            <span class="comment-emoji" aria-hidden="true">ğŸ˜Š</span>
            <label class="sr-only" for="comment-input-${post.id}">ëŒ“ê¸€ ì…ë ¥</label>
            <input
              id="comment-input-${post.id}"
              class="comment-input"
              data-role="comment-input"
              type="text"
              placeholder="ëŒ“ê¸€ ë‹¬ê¸°..."
              aria-label="ëŒ“ê¸€ ì…ë ¥"
            >
            <button class="comment-submit" type="submit" aria-label="ëŒ“ê¸€ ê²Œì‹œ">ê²Œì‹œ</button>
          </form>
        </div>
      `;

      bindPostInteractions(article);
      postRevealObserver.observe(article);

      return article;
    }

    // ê²Œì‹œë¬¼ë³„ ì¸í„°ë™ì…˜ ë°”ì¸ë”©
    function bindPostInteractions(postEl) {
      const likeBtn = postEl.querySelector('[data-action="like"]');
      const bookmarkBtn = postEl.querySelector('[data-action="bookmark"]');
      const imageFrame = postEl.querySelector('[data-role="image-frame"]');
      const imageEl = imageFrame.querySelector("img");
      const commentForm = postEl.querySelector(".comment-form");
      const commentInput = postEl.querySelector('[data-role="comment-input"]');
      const commentBtn = commentForm.querySelector(".comment-submit");
      const commentActionBtn = postEl.querySelector('.left-actions .action-btn:nth-child(2)');

      likeBtn.addEventListener("click", () => toggleLike(postEl, false));
      bookmarkBtn.addEventListener("click", () => toggleBookmark(postEl));

      imageFrame.addEventListener("dblclick", () => {
        imageFrame.classList.remove("show-heart");
        void imageFrame.offsetWidth;
        imageFrame.classList.add("show-heart");

        const alreadyLiked = likeBtn.getAttribute("aria-pressed") === "true";
        if (!alreadyLiked) {
          toggleLike(postEl, true);
        }
      });

      imageFrame.addEventListener("animationend", (event) => {
        if (event.animationName === "heart-pop-fade") {
          imageFrame.classList.remove("show-heart");
        }
      });

      const revealImage = () => {
        imageFrame.classList.add("loaded");
      };

      if (imageEl.complete) {
        revealImage();
      } else {
        imageEl.addEventListener("load", revealImage, { once: true });
        imageEl.addEventListener("error", revealImage, { once: true });
      }

      commentActionBtn.addEventListener("click", () => commentInput.focus());

      commentForm.addEventListener("submit", (event) => {
        event.preventDefault();
        const text = commentInput.value.trim();
        if (!text) {
          return;
        }
        appendComment(postEl, text);
        commentInput.value = "";
        commentBtn.style.opacity = "0.6";
      });

      commentInput.addEventListener("input", () => {
        commentBtn.style.opacity = commentInput.value.trim() ? "1" : "0.6";
      });
    }

    // ì¢‹ì•„ìš” í† ê¸€ + ìˆ«ì ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬
    function toggleLike(postEl, fromDoubleClick = false) {
      const likeBtn = postEl.querySelector('[data-action="like"]');
      const likesEl = postEl.querySelector(".likes");
      const currentLiked = likeBtn.getAttribute("aria-pressed") === "true";
      let likesCount = Number(postEl.dataset.likes);

      if (fromDoubleClick && currentLiked) {
        return;
      }

      if (currentLiked) {
        likesCount = Math.max(0, likesCount - 1);
        likeBtn.textContent = "â™¡";
        likeBtn.classList.remove("active");
        likeBtn.setAttribute("aria-pressed", "false");
      } else {
        likesCount += 1;
        likeBtn.textContent = "â¤ï¸";
        likeBtn.classList.add("active");
        likeBtn.setAttribute("aria-pressed", "true");
      }

      postEl.dataset.likes = String(likesCount);
      likesEl.textContent = `ì¢‹ì•„ìš” ${likesCount.toLocaleString("ko-KR")}ê°œ`;

      likeBtn.classList.remove("bounce");
      likesEl.classList.remove("animate");
      void likeBtn.offsetWidth;
      likeBtn.classList.add("bounce");
      likesEl.classList.add("animate");
    }

    // ë¶ë§ˆí¬ í† ê¸€ ì²˜ë¦¬
    function toggleBookmark(postEl) {
      const bookmarkBtn = postEl.querySelector('[data-action="bookmark"]');
      const currentState = bookmarkBtn.getAttribute("aria-pressed") === "true";
      const nextState = !currentState;

      bookmarkBtn.setAttribute("aria-pressed", String(nextState));
      bookmarkBtn.textContent = nextState ? "ğŸ“‘" : "ğŸ”–";
      bookmarkBtn.classList.toggle("active", nextState);

      bookmarkBtn.classList.remove("bounce");
      void bookmarkBtn.offsetWidth;
      bookmarkBtn.classList.add("bounce");
    }

    // ìŠ¤í† ë¦¬ ëª¨ë‹¬ ì—´ê¸°
    function openStoryModal(story) {
      lastFocusElement = document.activeElement;
      storyModalAvatarEl.src = story.avatar;
      storyModalAvatarEl.alt = `${story.username} í”„ë¡œí•„ ì‚¬ì§„`;
      storyModalNameEl.textContent = story.username;
      storyModalImageEl.src = `https://picsum.photos/seed/story-full-${story.id}/1080/1920`;
      storyModalImageEl.alt = `${story.username} ìŠ¤í† ë¦¬ ì´ë¯¸ì§€`;
      storyModalCaptionEl.textContent = story.isMine ? "ë‚´ ìŠ¤í† ë¦¬ë¥¼ ë³´ê³  ìˆì–´ìš”." : `${story.username}ë‹˜ì˜ ìŠ¤í† ë¦¬ì…ë‹ˆë‹¤.`;

      storyModalEl.classList.add("open");
      storyModalEl.setAttribute("aria-hidden", "false");

      storyProgressEl.classList.remove("running");
      void storyProgressEl.offsetWidth;
      storyProgressEl.classList.add("running");

      clearTimeout(storyTimer);
      storyTimer = setTimeout(() => {
        closeStoryModal();
      }, 5000);

      storyCloseBtnEl.focus();
    }

    // ìŠ¤í† ë¦¬ ëª¨ë‹¬ ë‹«ê¸°
    function closeStoryModal() {
      clearTimeout(storyTimer);
      storyProgressEl.classList.remove("running");
      storyModalEl.classList.remove("open");
      storyModalEl.setAttribute("aria-hidden", "true");

      if (lastFocusElement && typeof lastFocusElement.focus === "function") {
        lastFocusElement.focus();
      }
    }

    // ëŒ“ê¸€ ë™ì  ì¶”ê°€
    function appendComment(postEl, text) {
      const commentList = postEl.querySelector('[data-role="comment-list"]');
      const li = document.createElement("li");
      li.className = "comment-item";
      li.innerHTML = `<strong>me_now</strong>${text}`;
      commentList.appendChild(li);
    }

    // ë‹¤í¬ëª¨ë“œ ì ìš©
    function applyTheme(mode) {
      document.documentElement.setAttribute("data-theme", mode);
      themeToggleEl.checked = mode === "dark";
    }

    // ë‹¤í¬ëª¨ë“œ í† ê¸€
    function toggleTheme() {
      const current = document.documentElement.getAttribute("data-theme");
      applyTheme(current === "dark" ? "light" : "dark");
    }

    // ë¬´í•œ ìŠ¤í¬ë¡¤ìš© ìƒˆ ê²Œì‹œë¬¼ ìƒì„±
    function generatePostBatch(count = 3) {
      const textPool = [
        "ì˜¤ëŠ˜ë„ ì²œì²œíˆ, í•˜ì§€ë§Œ ê¾¸ì¤€í•˜ê²Œ.",
        "í–‡ì‚´ì´ ì¢‹ì•„ì„œ ì¹´ë©”ë¼ë¥¼ ë©ˆì¶œ ìˆ˜ ì—†ë˜ ë‚ .",
        "ì‘ì€ ë³€í™”ê°€ ë§Œë“œëŠ” í° ê¸°ë¶„ ì „í™˜.",
        "í•œ ì¥ì˜ ì‚¬ì§„ìœ¼ë¡œ ë‚¨ê¸°ëŠ” í•˜ë£¨ ê¸°ë¡.",
        "ì§€ê¸ˆ ì´ ìˆœê°„ì˜ ê³µê¸°ì™€ ì˜¨ë„."
      ];
      const namePool = ["urban.snap", "mood.archive", "hello_haru", "daily.noon", "by_hyeon"];

      const batch = [];
      for (let i = 0; i < count; i += 1) {
        const id = postIdSeed++;
        const username = namePool[Math.floor(Math.random() * namePool.length)];
        batch.push({
          id,
          username,
          avatar: `https://picsum.photos/seed/avatar-extra-${id}/80/80`,
          image: `https://picsum.photos/seed/post-extra-${id}/800/800`,
          likes: 60 + Math.floor(Math.random() * 500),
          caption: textPool[Math.floor(Math.random() * textPool.length)],
          comments: [
            { username: "follower.one", text: "í”¼ë“œ ë¶„ìœ„ê¸°ê°€ ë„ˆë¬´ ì¢‹ì•„ìš”!" },
            { username: "follower.two", text: "ë‹¤ìŒ ì‚¬ì§„ë„ ê¸°ëŒ€í• ê²Œìš”." }
          ],
          hoursAgo: 1 + Math.floor(Math.random() * 23),
          liked: false,
          bookmarked: false
        });
      }

      return batch;
    }

    // ë¬´í•œ ìŠ¤í¬ë¡¤ ì´ˆê¸°í™”
    function setupInfiniteScroll() {
      const infiniteObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting && !infiniteLoading) {
              infiniteLoading = true;
              const newPosts = generatePostBatch(3);
              postsData.push(...newPosts);
              renderPosts(newPosts, true);
              setTimeout(() => {
                infiniteLoading = false;
              }, 350);
            }
          });
        },
        { root: null, rootMargin: "220px 0px", threshold: 0.01 }
      );

      infiniteObserver.observe(feedSentinelEl);
    }

    // ì‚¬ì´ë“œ ì¶”ì²œ ìœ ì € ë Œë”ë§
    function renderSuggestions() {
      const fragment = document.createDocumentFragment();

      suggestUsers.forEach((user) => {
        const item = document.createElement("div");
        item.className = "suggest-item";
        item.innerHTML = `
          <div class="suggest-left">
            <img src="${user.avatar}" alt="${user.username} í”„ë¡œí•„ ì‚¬ì§„">
            <div class="suggest-meta">
              <span class="suggest-id">${user.username}</span>
              <span class="suggest-note">${user.name}</span>
            </div>
          </div>
          <button class="link-btn" type="button" aria-label="${user.username} íŒ”ë¡œìš°">íŒ”ë¡œìš°</button>
        `;
        fragment.appendChild(item);
      });

      suggestListEl.innerHTML = "";
      suggestListEl.appendChild(fragment);
    }

    // ëª¨ë‹¬ ì´ë²¤íŠ¸ ë“±ë¡
    function bindModalEvents() {
      storyCloseBtnEl.addEventListener("click", closeStoryModal);

      storyModalEl.addEventListener("click", (event) => {
        if (event.target === storyModalEl) {
          closeStoryModal();
        }
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && storyModalEl.classList.contains("open")) {
          closeStoryModal();
        }
      });
    }

    // í—¤ë” ë‹¤í¬ëª¨ë“œ í† ê¸€ ì´ë²¤íŠ¸
    function bindThemeEvents() {
      themeToggleEl.addEventListener("change", toggleTheme);
    }

    // ëª¨ë°”ì¼ í•˜ë‹¨ íƒ­ í™œì„±í™” í† ê¸€
    function bindMobileNav() {
      const navButtons = document.querySelectorAll(".mobile-nav button");
      navButtons.forEach((button) => {
        button.addEventListener("click", () => {
          navButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
        });
      });
    }

    // ì•± ì´ˆê¸°í™”
    function init() {
      applyTheme("light");
      renderStories(storiesData);
      renderPosts(postsData, false);
      renderSuggestions();
      bindThemeEvents();
      bindModalEvents();
      bindMobileNav();
      setupInfiniteScroll();
    }

    init();
  </script>
</body>
</html>
